# Change: 修复语音输入模型加载失败问题

## Why

当前语音输入功能存在以下问题：

1. **模型路径配置错误**：代码中模型路径指向 `.tar.gz` 压缩文件，但 Vosk 需要解压后的目录
2. **模型文件缺失检查不足**：未在加载前检查模型文件是否存在，导致加载失败时错误信息不清晰
3. **错误处理不完善**：模型加载失败时错误信息不够详细，用户无法了解具体原因和解决方案
4. **错误恢复机制缺失**：加载失败后没有提供重试或降级方案，影响用户体验
5. **稳定性问题**：需要确保所有错误都被正确捕获，不会导致服务崩溃或需要重启

这些问题导致用户点击录音时出现 "failed to load Failed to load model for zh-CN" 错误，无法正常使用语音输入功能。

## What Changes

### 核心修复
- **修复模型路径配置**：将模型路径从 `.tar.gz` 文件改为解压后的目录路径
- **添加模型文件存在性检查**：在加载模型前检查文件是否存在，提供清晰的错误提示
- **改进错误处理**：区分不同类型的错误（文件不存在、网络错误、格式错误等），提供针对性的错误信息和解决方案
- **增强错误恢复**：提供重试机制和降级方案（自动切换到文本输入）
- **完善错误日志**：记录详细的错误信息，便于问题排查

### 用户体验改进
- 模型文件缺失时，显示清晰的提示信息和下载链接
- 网络错误时，提供重试按钮和离线使用提示
- 所有错误情况下，确保文本输入功能始终可用
- 提供模型配置检查工具，帮助用户诊断问题

### 稳定性保障
- 确保所有异步操作都有错误处理，不会导致未捕获的异常
- 模型加载失败时优雅降级，不影响其他功能
- 添加错误边界（Error Boundary）保护，防止组件崩溃影响整个页面

**非BREAKING**：这是错误修复，不影响现有功能。修复后语音输入功能可以正常工作。

## Impact

### 影响规范
- **interview-practice** (修改): 增强语音识别错误处理场景，添加模型加载失败的处理逻辑

### 影响代码
- **前端**:
  - `utils/voskRecognition.ts`: 修复模型路径配置，添加文件存在性检查，改进错误处理
  - `components/VoiceInput.tsx`: 增强错误处理和用户提示，添加重试机制
  - `VOICE_INPUT_SETUP.md`: 更新模型配置说明，确保路径配置正确

### 实现状态
- 📋 **待实现**: 所有修复待开发
