# Capability: Training Plans (訓練計劃管理)

## ADDED Requirements

### Requirement: 創建訓練計劃
係統SHALL允许用户創建針對特定學校的訓練計劃，根據面試日期和可用時間自動生成每日任務。

#### Scenario: 創建基础訓練計劃
- **WHEN** 用户提供目標學校（如"SPCC"）、面試日期（如"2026-03-15"）和每周可用小時數（如5小時）
- **THEN** 係統調用AI生成包含每日任務的訓練計劃
- **AND** 計劃包含七大專項類別的合理分配（英文、中文、邏輯、時事、科學、个人、討論）
- **AND** 計劃保存到數據庫并返回計劃ID

#### Scenario: AI生成失敗時的降级处理
- **WHEN** AI API調用失敗（网络错误或API限制）
- **THEN** 係統使用预设模板生成基础計劃
- **AND** 提示用户可以稍後重新生成或手動調整

### Requirement: 查看訓練計劃
係統SHALL提供多種方式查看訓練計劃的详细信息和進度。

#### Scenario: 查看今日任務
- **WHEN** 用户请求查看今日任務
- **THEN** 係統显示当天的專項類別、目標題數和已完成題數
- **AND** 標注任務完成狀態（未開始/進行中/已完成）

#### Scenario: 查看整体計劃概览
- **WHEN** 用户请求查看完整計劃
- **THEN** 係統显示計劃元數據（目標學校、日期范围、總進度）
- **AND** 列出所有每日任務及其完成情况
- **AND** 显示關键里程碑和检查點

### Requirement: 調整訓練計劃
係統SHALL支持手動和自動两種方式調整訓練計劃。

#### Scenario: 手動調整每日任務
- **WHEN** 用户修改某日任務的專項類別或題數
- **THEN** 係統保存調整并記錄修改历史
- **AND** 提示後续任務是否需要相应調整

#### Scenario: 自适应計劃調整
- **WHEN** 係統检测到某專項持续表现不佳（连续3次會話平均分<60%）
- **THEN** 係統建議增加该專項的訓練频率
- **AND** 生成調整後的計劃预览供用户確认
- **AND** 用户確认後应用調整并記錄原因

#### Scenario: 根據剩余時間压缩計劃
- **WHEN** 用户推迟或错過多日任務，剩余時間不足
- **THEN** 係統重新計算任務分配，優先保留薄弱專項
- **AND** 提示用户計劃已調整并显示变更內容

### Requirement: 計劃元數據管理
係統SHALL存储和管理計劃的元數據，支持多个計劃并行。

#### Scenario: 查询活跃計劃
- **WHEN** 用户查询当前活跃的計劃
- **THEN** 係統返回未完成且未過期的計劃列表
- **AND** 显示每个計劃的進度百分比

#### Scenario: 归檔已完成計劃
- **WHEN** 計劃的面試日期已過或用户標記为完成
- **THEN** 係統将計劃狀態设为"已归檔"
- **AND** 历史數據保留但不再出现在活跃列表
