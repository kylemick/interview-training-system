# åŠŸèƒ½å¢å¼ºå®Œæˆæ€»ç»“

## ğŸ“‹ éœ€æ±‚

ç”¨æˆ·è¦æ±‚ï¼š
> é¢è¯•å›å¿†AIåˆ†æä¸ä»…è¦åˆ†æé¢˜ç›®ï¼Œè¿˜éœ€è¦åˆ†æå­¦ç”Ÿçš„é—®é¢˜ï¼ˆå¼±ç‚¹ï¼‰ï¼Œå­¦ç”Ÿé—®é¢˜éœ€è¦ä¸€ä¸ªå•ç‹¬çš„è¡¨è®°å½•ï¼Œåç»­å¯ä»¥é’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œæ¥åšAIé¢˜ç›®ç”Ÿæˆã€‚

## âœ… å·²å®Œæˆ

### 1. æ•°æ®åº“Schemaæ›´æ–°

**æ–°å¢è¡¨**: `student_weaknesses`

å­—æ®µè¯´æ˜ï¼š
- `weakness_type` - å¼±ç‚¹ç±»å‹ï¼ˆvocabulary/grammar/logic/knowledge_gap/confidence/expressionï¼‰
- `severity` - ä¸¥é‡ç¨‹åº¦ï¼ˆlow/medium/highï¼‰
- `description` - å¼±ç‚¹æè¿°
- `example_text` - ç¤ºä¾‹åŸæ–‡
- `improvement_suggestions` - æ”¹è¿›å»ºè®®
- `practice_count` - å·²é’ˆå¯¹æ€§ç»ƒä¹ æ¬¡æ•°
- `status` - çŠ¶æ€ï¼ˆactive/improved/resolvedï¼‰

### 2. AIåˆ†æå¢å¼º

**æ›´æ–°æ¥å£**: `POST /api/ai/extract-interview-memory`

**æ–°çš„åˆ†æèƒ½åŠ›**ï¼š
- âœ… æå–é¢è¯•é—®é¢˜ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰
- ğŸ†• è¯†åˆ«å­¦ç”Ÿå¼±ç‚¹ï¼ˆæ–°å¢ï¼‰
- ğŸ†• è¯„ä¼°ä¸¥é‡ç¨‹åº¦
- ğŸ†• ç”Ÿæˆæ”¹è¿›å»ºè®®
- ğŸ†• æå–ç›¸å…³è¯é¢˜

**è¿”å›æ•°æ®ç¤ºä¾‹**ï¼š
```json
{
  "questions": [...],
  "weaknesses": [
    {
      "category": "english-oral",
      "weakness_type": "vocabulary",
      "description": "è¯æ±‡é‡ä¸è¶³ï¼Œè¡¨è¾¾å•ä¸€",
      "example_text": "I think... it's good...",
      "severity": "medium",
      "improvement_suggestions": "å»ºè®®å¤šé˜…è¯»è‹±æ–‡åŸè‘—...",
      "related_topics": ["reading", "vocabulary"]
    }
  ],
  "summary": "æ•´ä½“åˆ†æ..."
}
```

### 3. æ–°å¢APIæ¥å£

#### A. å¼±ç‚¹ç®¡ç†API (`/api/weaknesses`)

1. **GET /api/weaknesses** - è·å–å¼±ç‚¹åˆ—è¡¨
   - æ”¯æŒæŒ‰å­¦ç”Ÿã€ç±»åˆ«ã€çŠ¶æ€ã€ä¸¥é‡ç¨‹åº¦ç­›é€‰

2. **GET /api/weaknesses/:id** - è·å–å•ä¸ªå¼±ç‚¹è¯¦æƒ…

3. **PATCH /api/weaknesses/:id/status** - æ›´æ–°å¼±ç‚¹çŠ¶æ€
   - active â†’ improved â†’ resolved

4. **DELETE /api/weaknesses/:id** - åˆ é™¤å¼±ç‚¹è®°å½•

5. **GET /api/weaknesses/stats/summary** - å¼±ç‚¹ç»Ÿè®¡
   - æŒ‰ç±»åˆ«ã€ç±»å‹ã€ä¸¥é‡ç¨‹åº¦ã€çŠ¶æ€ç»Ÿè®¡

#### B. AIå¢å¼ºAPI

1. **POST /api/ai/save-weaknesses** - ä¿å­˜å¼±ç‚¹åˆ†æ
   - æ‰¹é‡ä¿å­˜è¯†åˆ«çš„å¼±ç‚¹

2. **POST /api/ai/generate-questions-from-weaknesses** ğŸ”¥
   - æ ¹æ®å¼±ç‚¹IDç”Ÿæˆé’ˆå¯¹æ€§é¢˜ç›®
   - æˆ–æ ¹æ®ç±»åˆ«ç”Ÿæˆé¢˜ç›®
   - è‡ªåŠ¨æ›´æ–°ç»ƒä¹ æ¬¡æ•°

### 4. å‰ç«¯ç•Œé¢æ›´æ–°

**é¢è¯•å›å¿†é¡µé¢å¢å¼º**ï¼š
- âœ… æ˜¾ç¤ºAIè¯†åˆ«çš„å¼±ç‚¹å¡ç‰‡
- âœ… ä¸¥é‡ç¨‹åº¦æ ‡ç­¾ï¼ˆé«˜/ä¸­/ä½ï¼‰
- âœ… å¼±ç‚¹æè¿°å’Œç¤ºä¾‹
- âœ… æ”¹è¿›å»ºè®®å±•ç¤º
- âœ… ç›¸å…³è¯é¢˜æ ‡ç­¾
- âœ… è‡ªåŠ¨ä¿å­˜é—®é¢˜å’Œå¼±ç‚¹

### 5. æ–‡æ¡£

- âœ… `FEATURE-WEAKNESS-ANALYSIS.md` - å®Œæ•´åŠŸèƒ½æ–‡æ¡£
- âœ… æ•°æ®åº“è¿ç§»è„šæœ¬
- âœ… APIä½¿ç”¨ç¤ºä¾‹
- âœ… ä½¿ç”¨æµç¨‹è¯´æ˜

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æµç¨‹

### æµç¨‹ 1: åˆ†æä¸ä¿å­˜

```
ç”¨æˆ·è¾“å…¥é¢è¯•å›å¿†
    â†“
AIåˆ†ææå–é—®é¢˜å’Œå¼±ç‚¹
    â†“
å‰ç«¯å±•ç¤ºåˆ†æç»“æœ
    â†“
ç”¨æˆ·ç‚¹å‡»"ä¿å­˜åˆ°é¢˜åº“"
    â†“
ç³»ç»Ÿä¿å­˜ï¼š
  - questions è¡¨ â† é¢˜ç›®
  - student_weaknesses è¡¨ â† å¼±ç‚¹
```

### æµç¨‹ 2: é’ˆå¯¹æ€§ç»ƒä¹ 

```
æŸ¥çœ‹å­¦ç”Ÿå¼±ç‚¹åˆ—è¡¨
    â†“
é€‰æ‹©è¦åŠ å¼ºçš„å¼±ç‚¹
    â†“
è°ƒç”¨ generate-questions-from-weaknesses
    â†“
AIç”Ÿæˆé’ˆå¯¹æ€§é¢˜ç›®
    â†“
é¢˜ç›®ä¿å­˜åˆ°é¢˜åº“ï¼ˆæ ‡è®°ä¸ºtargetedï¼‰
    â†“
æ›´æ–°å¼±ç‚¹çš„practice_count
```

### æµç¨‹ 3: è¿›åº¦è¿½è¸ª

```
å®Œæˆé’ˆå¯¹æ€§ç»ƒä¹ 
    â†“
ç³»ç»Ÿè®°å½•practice_count++
    â†“
ç”¨æˆ·/ç³»ç»Ÿæ›´æ–°å¼±ç‚¹çŠ¶æ€
  - active â†’ improved â†’ resolved
    â†“
æŸ¥çœ‹å¼±ç‚¹æ”¹å–„ç»Ÿè®¡
```

## ğŸ“Š æ•°æ®å…³è”

```
student_weaknesses
    â†“ (é€šè¿‡categoryå…³è”)
questions (source='ai_generated_targeted')
    â†“ (é€šè¿‡question_idå…³è”)
qa_records
    â†“ (é€šè¿‡session_idå…³è”)
feedback
```

## ğŸ”§ æŠ€æœ¯å®ç°äº®ç‚¹

### 1. AIæç¤ºè¯ä¼˜åŒ–

**å¤šç»´åº¦åˆ†æ**ï¼š
- è¯æ±‡ï¼ˆvocabularyï¼‰
- è¯­æ³•ï¼ˆgrammarï¼‰
- é€»è¾‘ï¼ˆlogicï¼‰
- çŸ¥è¯†ï¼ˆknowledge_gapï¼‰
- ä¿¡å¿ƒï¼ˆconfidenceï¼‰
- è¡¨è¾¾ï¼ˆexpressionï¼‰

### 2. é’ˆå¯¹æ€§é¢˜ç›®ç”Ÿæˆ

**æ™ºèƒ½åŒ¹é…**ï¼š
- æ ¹æ®å¼±ç‚¹ç±»å‹å®šåˆ¶é¢˜ç›®
- è€ƒè™‘ä¸¥é‡ç¨‹åº¦è°ƒæ•´éš¾åº¦
- ç»“åˆç›¸å…³è¯é¢˜ç”Ÿæˆå†…å®¹

### 3. æ•°æ®å®Œæ•´æ€§

**ç´¢å¼•ä¼˜åŒ–**ï¼š
```sql
INDEX idx_student_category (student_name, category)
INDEX idx_status_severity (status, severity)
```

**å¤–é”®å…³ç³»**ï¼š
- questions.source æ ‡è®°æ¥æº
- practice_count è¿½è¸ªç»ƒä¹ æ¬¡æ•°

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: å®Œæ•´æµç¨‹

```bash
# 1. æäº¤é¢è¯•å›å¿†
curl -X POST http://localhost:3001/api/ai/extract-interview-memory \
  -d '{"text":"ä»Šå¤©é¢è¯•è¡¨ç°ä¸å¥½ï¼Œè¯´è¯æ€»æ˜¯I think... I think..."}'

# 2. AIè¿”å›ï¼š
#    - é—®é¢˜ï¼šTell me about yourself
#    - å¼±ç‚¹ï¼švocabulary - è¯æ±‡å•ä¸€ï¼Œé‡å¤ä½¿ç”¨"I think"

# 3. ä¿å­˜ï¼ˆå‰ç«¯è‡ªåŠ¨ï¼‰

# 4. æŸ¥çœ‹å¼±ç‚¹
curl http://localhost:3001/api/weaknesses

# 5. ç”Ÿæˆé’ˆå¯¹æ€§é¢˜ç›®
curl -X POST http://localhost:3001/api/ai/generate-questions-from-weaknesses \
  -d '{"weakness_ids":[1],"count":5}'

# 6. ç»ƒä¹ å¹¶æ ‡è®°æ”¹å–„
curl -X PATCH http://localhost:3001/api/weaknesses/1/status \
  -d '{"status":"improved"}'
```

## ğŸ å¸¦æ¥çš„ä»·å€¼

1. **ä¸ªæ€§åŒ–è®­ç»ƒ**
   - ä¸å†ç›²ç›®ç»ƒä¹ ï¼Œé’ˆå¯¹å¼±ç‚¹å¼ºåŒ–

2. **è¿›åº¦å¯è§†åŒ–**
   - æ¸…æ™°çœ‹åˆ°å“ªäº›æ–¹é¢éœ€è¦æ”¹è¿›
   - è¿½è¸ªæ”¹å–„å†ç¨‹

3. **æ™ºèƒ½æ¨è**
   - AIè‡ªåŠ¨ç”Ÿæˆæœ€åˆé€‚çš„ç»ƒä¹ é¢˜
   - èŠ‚çœäººå·¥æŒ‘é¢˜æ—¶é—´

4. **æ•°æ®é©±åŠ¨**
   - åŸºäºçœŸå®è¡¨ç°è¯†åˆ«é—®é¢˜
   - é‡åŒ–æ”¹å–„æ•ˆæœ

## ğŸš€ æœªæ¥æ‰©å±•æ–¹å‘

1. **å¼±ç‚¹è¶‹åŠ¿åˆ†æ**
   - æ—¶é—´è½´å±•ç¤ºå¼±ç‚¹å˜åŒ–
   - é¢„æµ‹éœ€è¦åŠ å¼ºçš„é¢†åŸŸ

2. **è‡ªåŠ¨ç»ƒä¹ æ¨è**
   - ç™»å½•æ—¶è‡ªåŠ¨æ¨èé’ˆå¯¹æ€§é¢˜ç›®
   - æ™ºèƒ½è°ƒæ•´ç»ƒä¹ éš¾åº¦

3. **ç»¼åˆæŠ¥å‘Š**
   - ç”Ÿæˆå¼±ç‚¹åˆ†ææŠ¥å‘Š
   - å¯¼å‡ºPDFä¾›å®¶é•¿æŸ¥çœ‹

## âœ… è´¨é‡ä¿è¯

- âœ… æ— linté”™è¯¯
- âœ… APIæ¥å£æ­£å¸¸
- âœ… æ•°æ®åº“schemaæ›´æ–°
- âœ… å‰ç«¯ç•Œé¢å®Œæ•´
- âœ… æ–‡æ¡£é½å…¨

## ğŸ‰ æ€»ç»“

æˆåŠŸå®ç°äº†å®Œæ•´çš„å­¦ç”Ÿå¼±ç‚¹åˆ†æå’Œé’ˆå¯¹æ€§é¢˜ç›®ç”Ÿæˆç³»ç»Ÿï¼

**æ ¸å¿ƒæˆæœ**ï¼š
- ğŸ†• 1ä¸ªæ–°æ•°æ®è¡¨ï¼ˆstudent_weaknessesï¼‰
- ğŸ†• 7ä¸ªæ–°APIæ¥å£
- ğŸ”„ 1ä¸ªå¢å¼ºçš„AIåˆ†ææ¥å£
- ğŸ¨ å‰ç«¯ç•Œé¢å¼±ç‚¹å±•ç¤º
- ğŸ“š å®Œæ•´çš„åŠŸèƒ½æ–‡æ¡£

ç³»ç»Ÿç°åœ¨ä¸ä»…æ˜¯"ç»ƒä¹ å·¥å…·"ï¼Œæ›´æ˜¯"æ™ºèƒ½è®­ç»ƒåŠ©æ‰‹"ï¼ ğŸ“âœ¨
