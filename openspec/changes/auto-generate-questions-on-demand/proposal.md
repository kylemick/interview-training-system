# Change: 自动生成题目以避免服务中断

## Why

当前系统在创建训练计划或启动练习会话时，如果某个类别没有可用题目，会直接抛出错误并中断流程。这会导致：
1. 用户体验差：用户需要手动去题库页面生成题目，然后重新尝试创建计划或启动练习
2. 服务不稳定：错误可能导致前端显示错误信息，影响用户继续使用
3. 效率低下：用户需要额外的操作步骤，无法流畅地使用系统

用户期望系统能够智能地检测题目缺失情况，并自动通过AI生成所需题目，确保流程能够顺畅进行。

## What Changes

- **训练计划创建流程增强**：当创建训练计划时，如果检测到某个类别没有可用题目，系统自动调用AI生成题目，而不是抛出错误
- **练习会话创建流程增强**：当从任务启动练习会话时，如果该类别没有可用题目，系统自动生成题目后再继续创建会话
- **错误处理增强**：所有题目缺失相关的错误处理都改为自动生成，确保不会因为题目缺失导致服务中断或重启
- **题目生成策略**：根据任务或计划的上下文（类别、目标学校、难度）智能生成合适数量的题目
- **降级处理**：如果AI生成题目失败，提供友好的错误提示，但不会导致服务崩溃

## Impact

- **Affected specs**:
  - `training-plans` - 训练计划创建流程需要修改
  - `interview-practice` - 练习会话创建流程需要修改
  - `question-bank` - 题目生成能力需要增强，支持按需自动生成

- **Affected code**:
  - `backend/src/routes/plans.ts` - 修改任务启动练习会话的逻辑
  - `backend/src/routes/sessions.ts` - 修改自由模式创建会话的逻辑
  - `backend/src/ai/questionGenerator.ts` - 可能需要增强以支持批量生成
  - `backend/src/middleware/errorHandler.ts` - 确保错误处理不会导致服务重启

- **Breaking changes**: 无
