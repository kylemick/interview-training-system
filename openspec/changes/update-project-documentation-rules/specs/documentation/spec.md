## MODIFIED Requirements

### Requirement: 项目文档完整性要求
系统SHALL维护准确、完整的项目文档，反映当前实现状态。

#### Scenario: 文档与代码同步
- **WHEN** 代码实现发生变化（新增功能、修改架构、更新技术栈）
- **THEN** 项目文档（`openspec/project.md`）应在变更完成后及时更新
- **AND** 文档应准确反映当前的技术栈、项目结构、功能模块和能力列表
- **AND** 文档更新应作为变更实施的一部分，在任务清单中明确标注

#### Scenario: 文档审查检查清单
- **WHEN** 更新项目文档时
- **THEN** 应检查以下内容是否准确：
  - 技术栈版本和依赖
  - 项目目录结构
  - 已实现的功能模块列表
  - 已归档的能力列表
  - 开发规范和约束条件（包括AI调用超时规范、前端组件使用规范等）
  - API端点列表（如适用）
  - 数据库表结构概览（如适用）

## ADDED Requirements

### Requirement: AI调用超时规范文档要求
系统SHALL在项目文档中明确记录AI调用的超时规范，确保所有AI相关接口遵循无超时限制的要求。

#### Scenario: AI调用超时规范记录
- **WHEN** 查看项目文档的约束条件部分
- **THEN** 应明确说明所有AI调用接口必须设置 `timeout: 0`（无超时限制）
- **AND** 应列出需要遵循此规范的所有AI相关接口类型
- **AND** 应提供后端和前端的具体实现示例
- **AND** 应说明原因（AI处理可能需要较长时间，不应因超时而中断）

#### Scenario: AI调用超时规范检查
- **WHEN** 实施涉及AI调用的变更时
- **THEN** 应在文档审查检查清单中验证新接口是否遵循超时规范
- **AND** 应在代码审查中检查AI接口的超时设置
- **AND** 应在任务清单中明确标注需要遵循此规范

### Requirement: 前端通用组件规范文档要求
系统SHALL在项目文档中明确记录前端AI交互组件的使用规范，确保所有AI调用页面使用统一的悬浮框组件。

#### Scenario: 前端组件规范记录
- **WHEN** 查看项目文档的约束条件部分
- **THEN** 应明确说明所有AI调用页面必须使用通用悬浮框组件（`AiThinkingDisplay`）
- **AND** 应说明组件的位置和用法（`frontend/src/components/AiThinkingDisplay/`）
- **AND** 应列出需要使用此组件的所有页面类型
- **AND** 应说明原因（保持用户体验一致性，避免各自实现不同的loading提示）

#### Scenario: 前端组件规范检查
- **WHEN** 实施涉及AI调用的前端页面变更时
- **THEN** 应在文档审查检查清单中验证新页面是否使用通用悬浮框组件
- **AND** 应在代码审查中检查AI调用页面是否集成 `AiThinkingDisplay` 组件
- **AND** 应在任务清单中明确标注需要使用通用组件
