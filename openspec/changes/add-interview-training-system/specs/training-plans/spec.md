# Capability: Training Plans (训练计划管理)

## ADDED Requirements

### Requirement: 创建训练计划
系统SHALL允许用户创建针对特定学校的训练计划，根据面试日期和可用时间自动生成每日任务。

#### Scenario: 创建基础训练计划
- **WHEN** 用户提供目标学校（如"SPCC"）、面试日期（如"2026-03-15"）和每周可用小时数（如5小时）
- **THEN** 系统调用AI生成包含每日任务的训练计划
- **AND** 计划包含七大专项类别的合理分配（英文、中文、逻辑、时事、科学、个人、讨论）
- **AND** 计划保存到数据库并返回计划ID

#### Scenario: AI生成失败时的降级处理
- **WHEN** AI API调用失败（网络错误或API限制）
- **THEN** 系统使用预设模板生成基础计划
- **AND** 提示用户可以稍后重新生成或手动调整

### Requirement: 查看训练计划
系统SHALL提供多种方式查看训练计划的详细信息和进度。

#### Scenario: 查看今日任务
- **WHEN** 用户请求查看今日任务
- **THEN** 系统显示当天的专项类别、目标题数和已完成题数
- **AND** 标注任务完成状态（未开始/进行中/已完成）

#### Scenario: 查看整体计划概览
- **WHEN** 用户请求查看完整计划
- **THEN** 系统显示计划元数据（目标学校、日期范围、总进度）
- **AND** 列出所有每日任务及其完成情况
- **AND** 显示关键里程碑和检查点

### Requirement: 调整训练计划
系统SHALL支持手动和自动两种方式调整训练计划。

#### Scenario: 手动调整每日任务
- **WHEN** 用户修改某日任务的专项类别或题数
- **THEN** 系统保存调整并记录修改历史
- **AND** 提示后续任务是否需要相应调整

#### Scenario: 自适应计划调整
- **WHEN** 系统检测到某专项持续表现不佳（连续3次会话平均分<60%）
- **THEN** 系统建议增加该专项的训练频率
- **AND** 生成调整后的计划预览供用户确认
- **AND** 用户确认后应用调整并记录原因

#### Scenario: 根据剩余时间压缩计划
- **WHEN** 用户推迟或错过多日任务，剩余时间不足
- **THEN** 系统重新计算任务分配，优先保留薄弱专项
- **AND** 提示用户计划已调整并显示变更内容

### Requirement: 计划元数据管理
系统SHALL存储和管理计划的元数据，支持多个计划并行。

#### Scenario: 查询活跃计划
- **WHEN** 用户查询当前活跃的计划
- **THEN** 系统返回未完成且未过期的计划列表
- **AND** 显示每个计划的进度百分比

#### Scenario: 归档已完成计划
- **WHEN** 计划的面试日期已过或用户标记为完成
- **THEN** 系统将计划状态设为"已归档"
- **AND** 历史数据保留但不再出现在活跃列表
