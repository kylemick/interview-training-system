# Change: 修复語音输入模型加载失敗問題

## Why

当前語音输入功能存在以下問題：

1. **模型路径配置错误**：代碼中模型路径指向 `.tar.gz` 压缩文件，但 Vosk 需要解压後的目錄
2. **模型文件缺失检查不足**：未在加载前检查模型文件是否存在，導致加载失敗時错误信息不清晰
3. **错误处理不完善**：模型加载失敗時错误信息不够详细，用户无法了解具体原因和解决方案
4. **错误恢复机制缺失**：加载失敗後没有提供重試或降级方案，影响用户体验
5. **稳定性問題**：需要確保所有错误都被正確捕获，不會導致服務崩溃或需要重启

这些問題導致用户點击錄音時出现 "failed to load Failed to load model for zh-CN" 错误，无法正常使用語音输入功能。

## What Changes

### 核心修复
- **修复模型路径配置**：将模型路径從 `.tar.gz` 文件改为解压後的目錄路径
- **添加模型文件存在性检查**：在加载模型前检查文件是否存在，提供清晰的错误提示
- **改進错误处理**：区分不同類型的错误（文件不存在、网络错误、格式错误等），提供針對性的错误信息和解决方案
- **增强错误恢复**：提供重試机制和降级方案（自動切换到文本输入）
- **完善错误日志**：記錄详细的错误信息，便于問題排查

### 用户体验改進
- 模型文件缺失時，显示清晰的提示信息和下载链接
- 网络错误時，提供重試按钮和离线使用提示
- 所有错误情况下，確保文本输入功能始终可用
- 提供模型配置检查工具，帮助用户诊断問題

### 稳定性保障
- 確保所有异步操作都有错误处理，不會導致未捕获的异常
- 模型加载失敗時優雅降级，不影响其他功能
- 添加错误边界（Error Boundary）保护，防止組件崩溃影响整个页面

**非BREAKING**：这是错误修复，不影响现有功能。修复後語音输入功能可以正常工作。

## Impact

### 影响規范
- **interview-practice** (修改): 增强語音識別错误处理场景，添加模型加载失敗的处理邏輯

### 影响代碼
- **前端**:
  - `utils/voskRecognition.ts`: 修复模型路径配置，添加文件存在性检查，改進错误处理
  - `components/VoiceInput.tsx`: 增强错误处理和用户提示，添加重試机制
  - `VOICE_INPUT_SETUP.md`: 更新模型配置說明，確保路径配置正確

### 实现狀態
- 📋 **待实现**: 所有修复待開發
