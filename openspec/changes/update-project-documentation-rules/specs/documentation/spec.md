## MODIFIED Requirements

### Requirement: 項目文檔完整性要求
係統SHALL維护準確、完整的項目文檔，反映当前实现狀態。

#### Scenario: 文檔与代碼同步
- **WHEN** 代碼实现發生变化（新增功能、修改架构、更新技術栈）
- **THEN** 項目文檔（`openspec/project.md`）应在变更完成後及時更新
- **AND** 文檔应準確反映当前的技術栈、項目結构、功能模块和能力列表
- **AND** 文檔更新应作为变更实施的一部分，在任務清单中明確標注

#### Scenario: 文檔审查检查清单
- **WHEN** 更新項目文檔時
- **THEN** 应检查以下內容是否準確：
  - 技術栈版本和依赖
  - 項目目錄結构
  - 已实现的功能模块列表
  - 已归檔的能力列表
  - 開發規范和约束条件（包括AI調用超時規范、前端組件使用規范等）
  - API端點列表（如适用）
  - 數據庫表結构概览（如适用）

## ADDED Requirements

### Requirement: AI調用超時規范文檔要求
係統SHALL在項目文檔中明確記錄AI調用的超時規范，確保所有AI相關接口遵循无超時限制的要求。

#### Scenario: AI調用超時規范記錄
- **WHEN** 查看項目文檔的约束条件部分
- **THEN** 应明確說明所有AI調用接口必须设置 `timeout: 0`（无超時限制）
- **AND** 应列出需要遵循此規范的所有AI相關接口類型
- **AND** 应提供後端和前端的具体实现示例
- **AND** 应說明原因（AI处理可能需要较長時間，不应因超時而中断）

#### Scenario: AI調用超時規范检查
- **WHEN** 实施涉及AI調用的变更時
- **THEN** 应在文檔审查检查清单中验证新接口是否遵循超時規范
- **AND** 应在代碼审查中检查AI接口的超時设置
- **AND** 应在任務清单中明確標注需要遵循此規范

### Requirement: 前端通用組件規范文檔要求
係統SHALL在項目文檔中明確記錄前端AI交互組件的使用規范，確保所有AI調用页面使用統一的悬浮框組件。

#### Scenario: 前端組件規范記錄
- **WHEN** 查看項目文檔的约束条件部分
- **THEN** 应明確說明所有AI調用页面必须使用通用悬浮框組件（`AiThinkingDisplay`）
- **AND** 应說明組件的位置和用法（`frontend/src/components/AiThinkingDisplay/`）
- **AND** 应列出需要使用此組件的所有页面類型
- **AND** 应說明原因（保持用户体验一致性，避免各自实现不同的loading提示）

#### Scenario: 前端組件規范检查
- **WHEN** 实施涉及AI調用的前端页面变更時
- **THEN** 应在文檔审查检查清单中验证新页面是否使用通用悬浮框組件
- **AND** 应在代碼审查中检查AI調用页面是否集成 `AiThinkingDisplay` 組件
- **AND** 应在任務清单中明確標注需要使用通用組件
