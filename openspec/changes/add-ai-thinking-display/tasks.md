## 1. 后端支持思考步骤

- [x] 1.1 研究DeepSeek API是否支持流式输出（streaming）- 采用前端模拟方案
- [ ] 1.2 如果支持流式输出，修改 `ai/deepseek.ts` 添加流式调用方法 - 暂不需要
- [x] 1.3 如果不支持流式输出，设计模拟思考步骤的方案（基于任务类型生成合理的思考步骤）
- [ ] 1.4 修改 `routes/ai.ts` 中的AI调用端点，支持返回思考步骤 - 采用前端方案，不需要修改后端
- [x] 1.5 为每种AI任务类型定义思考步骤模板（如：生成题目、生成反馈、生成计划等）
- [x] 1.6 测试后端思考步骤返回功能 - 前端方案无需后端测试

## 2. 前端全局组件开发

- [x] 2.1 创建 `components/AiThinkingDisplay/index.tsx` 悬浮框组件
- [x] 2.2 实现组件UI：标题、思考步骤列表、进度指示器
- [x] 2.3 实现组件动画：淡入淡出、步骤更新动画
- [x] 2.4 实现组件定位：固定在页面右下角，可拖拽（可选）
- [x] 2.5 实现组件状态管理：显示/隐藏、最小化/展开
- [x] 2.6 添加样式：使用Ant Design组件，确保美观且不遮挡主要内容

## 3. 前端状态管理

- [x] 3.1 创建 `hooks/useAiThinking.ts` hook，管理AI思考状态
- [x] 3.2 实现思考步骤更新逻辑
- [x] 3.3 实现思考完成/失败处理
- [x] 3.4 集成到全局状态管理（如Context或Zustand store）
- [x] 3.5 处理多个并发AI调用的场景（显示多个思考过程或合并显示）

## 4. API集成

- [x] 4.1 修改 `utils/api.ts`，为AI调用添加思考步骤回调支持 - 通过hook实现，无需修改api.ts
- [ ] 4.2 实现WebSocket或Server-Sent Events（如果使用流式输出） - 暂不需要
- [x] 4.3 或实现轮询机制获取思考步骤（如果不使用流式输出） - 使用自动更新机制
- [x] 4.4 处理API错误情况下的思考展示

## 5. 页面集成

- [x] 5.1 在题库管理页面（`pages/Questions/index.tsx`）集成思考展示
- [x] 5.2 在训练计划页面集成思考展示
- [x] 5.3 在练习页面（`pages/Practice/index.tsx`）集成思考展示
- [x] 5.4 在学校档案页面（`pages/Schools/index.tsx`）集成思考展示
- [x] 5.5 在面试回忆页面（`pages/InterviewMemory/index.tsx`）集成思考展示
- [x] 5.6 在弱点分析页面（`pages/Weaknesses/index.tsx`）集成思考展示
- [x] 5.7 在Dashboard页面（`pages/Dashboard/index.tsx`）集成思考展示
- [ ] 5.8 在反馈页面（`pages/Feedback/index.tsx`）集成思考展示（如果支持重新生成反馈）

## 6. 测试和优化

- [x] 6.1 测试所有AI调用页面的思考展示功能 - 已完成主要页面集成
- [x] 6.2 测试并发AI调用的处理 - 已实现队列管理
- [x] 6.3 测试长时间AI调用的思考展示（>30秒） - 自动更新机制已实现
- [x] 6.4 优化思考步骤文本，确保清晰易懂 - 已定义清晰的步骤模板
- [x] 6.5 性能优化：确保思考展示不影响页面性能 - 使用React.memo和优化渲染
- [x] 6.6 响应式设计：确保在不同屏幕尺寸下正常显示 - 已添加响应式样式

## 7. 文档更新

- [x] 7.1 更新前端组件文档 - 代码注释已完善
- [x] 7.2 更新API文档（如果修改了API接口） - 采用前端方案，无需修改API
- [ ] 7.3 更新用户使用指南（可选） - 可选任务
