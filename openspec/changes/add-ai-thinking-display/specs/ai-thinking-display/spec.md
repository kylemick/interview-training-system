# Capability: AI Thinking Display (AI思考過程展示)

## ADDED Requirements

### Requirement: 全局AI思考展示組件
係統SHALL在所有有AI調用的页面提供一个悬浮框組件，用于展示AI思考過程。

#### Scenario: 組件自動显示
- **WHEN** 用户触發任何AI調用（生成題目、生成反馈、生成計劃等）
- **THEN** 係統在页面右下角自動显示AI思考展示悬浮框
- **AND** 悬浮框显示当前AI任務類型（如"正在生成題目"）
- **AND** 悬浮框显示思考步骤列表，展示AI正在進行的操作

#### Scenario: 思考步骤更新
- **WHEN** AI处理過程中
- **THEN** 係統定期更新思考步骤狀態（如"分析題目要求" → "搜索相關知識點" → "生成題目內容"）
- **AND** 当前步骤高亮显示
- **AND** 已完成步骤显示为已完成狀態
- **AND** 更新過程有平滑的動画效果

#### Scenario: 組件自動隐藏
- **WHEN** AI調用成功完成
- **THEN** 係統显示"完成"步骤
- **AND** 3秒後自動隐藏悬浮框
- **OR** 用户點击關闭按钮立即隐藏

#### Scenario: 错误处理展示
- **WHEN** AI調用失敗
- **THEN** 係統在思考步骤中显示错误信息
- **AND** 悬浮框保持显示，让用户了解失敗原因
- **AND** 用户可以手動關闭悬浮框

#### Scenario: 組件交互
- **WHEN** 用户點击悬浮框的最小化按钮
- **THEN** 悬浮框最小化为小图標
- **AND** 點击图標可以重新展開
- **WHEN** 用户點击關闭按钮
- **THEN** 悬浮框立即隐藏

### Requirement: 思考步骤內容
係統SHALL为不同類型的AI任務提供相应的思考步骤描述。

#### Scenario: 生成題目的思考步骤
- **WHEN** 用户触發生成題目功能
- **THEN** 係統显示以下思考步骤：
  - "分析題目要求（類別、難度、學校特點）"
  - "搜索相關知識點和參考題目"
  - "生成題目內容"
  - "验证題目质量和語言規范"
  - "完成"
- **AND** 每个步骤根據实际处理進度更新狀態

#### Scenario: 生成反馈的思考步骤
- **WHEN** 用户提交答案後触發生成反馈
- **THEN** 係統显示以下思考步骤：
  - "分析學生回答內容"
  - "評估語言表達质量"
  - "評估內容深度和相關性"
  - "識別弱點和改進點"
  - "生成針對性建議"
  - "完成"
- **AND** 每个步骤根據实际处理進度更新狀態

#### Scenario: 生成訓練計劃的思考步骤
- **WHEN** 用户触發生成訓練計劃功能
- **THEN** 係統显示以下思考步骤：
  - "分析學生信息和目標學校"
  - "制定訓練策略和時間分配"
  - "生成每日任務安排"
  - "優化時間分配和專項比例"
  - "完成"
- **AND** 每个步骤根據实际处理進度更新狀態

#### Scenario: 其他AI任務的思考步骤
- **WHEN** 用户触發其他AI功能（生成學校檔案、提取面試回憶、生成學習素材等）
- **THEN** 係統显示相应的思考步骤
- **AND** 步骤描述清晰易懂，符合任務特點

### Requirement: 多并發調用处理
係統SHALL正確处理多个AI調用同時進行的情况。

#### Scenario: 单个AI調用
- **WHEN** 只有一个AI調用正在進行
- **THEN** 係統正常显示该調用的思考過程
- **AND** 悬浮框显示该調用的任務類型和步骤

#### Scenario: 多个AI調用
- **WHEN** 有多个AI調用同時進行
- **THEN** 係統優先显示用户主動触發的調用（如點击按钮触發的）
- **OR** 係統显示所有調用的合并狀態（如"正在处理2个任務"）
- **AND** 每个調用完成後，切换到下一个調用
- **AND** 所有調用完成後，悬浮框自動隐藏

### Requirement: 页面集成
係統SHALL在所有有AI調用的页面集成思考展示功能。

#### Scenario: 題庫管理页面
- **WHEN** 用户在題庫管理页面點击"AI生成題目"
- **THEN** 係統显示思考展示悬浮框
- **AND** 展示生成題目的思考步骤

#### Scenario: 練習页面
- **WHEN** 用户在練習页面提交答案後触發生成反馈
- **THEN** 係統显示思考展示悬浮框
- **AND** 展示生成反馈的思考步骤

#### Scenario: 訓練計劃页面
- **WHEN** 用户在訓練計劃页面點击"生成計劃"
- **THEN** 係統显示思考展示悬浮框
- **AND** 展示生成計劃的思考步骤

#### Scenario: 其他AI調用页面
- **WHEN** 用户在任何页面触發AI調用
- **THEN** 係統自動显示思考展示悬浮框
- **AND** 展示相应任務的思考步骤
- **AND** 包括但不限于：學校檔案页面、面試回憶页面、弱點分析页面、Dashboard页面

### Requirement: 性能要求
係統SHALL確保思考展示功能不影响页面性能和用户体验。

#### Scenario: 組件渲染性能
- **WHEN** 思考展示組件显示和更新
- **THEN** 組件渲染不影响页面其他操作的响应速度
- **AND** 使用React.memo等優化手段避免不必要的重渲染
- **AND** 動画效果流畅，不卡顿

#### Scenario: 网络请求優化
- **WHEN** 使用輪询方式获取思考步骤更新
- **THEN** 輪询频率合理（建議2-3秒一次）
- **AND** 不影响其他API请求的性能
- **AND** AI調用完成後立即停止輪询
