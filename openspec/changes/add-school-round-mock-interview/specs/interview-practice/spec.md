# Capability: Interview Practice (面試練習)

## MODIFIED Requirements

### Requirement: 启動練習會話
係統SHALL允许用户启動新的練習會話，并根據訓練計劃選擇合适的題目。

#### Scenario: 根據今日任務启動練習
- **WHEN** 用户启動練習并指定專項類別（如"english-oral"）
- **THEN** 係統從題庫中選擇符合条件的題目（匹配目標學校、适当難度）
- **AND** 創建新的會話記錄（包含會話ID、開始時間、專項類別）
- **AND** 展示第一道題目给用户

#### Scenario: 指定題目數量
- **WHEN** 用户启動練習并指定做題數量（如10題）
- **THEN** 係統预先選擇相应數量的題目
- **AND** 显示進度指示（如"第1/10題"）

#### Scenario: 启動學校-輪次模拟面試
- **WHEN** 用户選擇"學校-輪次模拟面試"模式并指定學校和輪次（如SPCC第一輪）
- **THEN** 係統搜索该學校對应輪次的历史題目和面試回憶
- **AND** 優先從題庫中選擇该學校该輪次的现有題目
- **AND** 如果題目數量不足，使用AI生成類似風格的題目（參考历史題目和面試回憶）
- **AND** 創建新的會話記錄，標記为學校-輪次模拟面試模式
- **AND** 展示第一道題目给用户

#### Scenario: 學校-輪次數據不足時的降级处理
- **WHEN** 用户選擇某學校某輪次，但该輪次的历史數據不足
- **THEN** 係統首先尝試使用该學校其他輪次的數據
- **AND** 如果仍不足，使用该學校的一般特征生成題目
- **AND** 在會話信息中提示用户數據來源和降级情况

## ADDED Requirements

### Requirement: 學校-輪次模拟面試模式
係統SHALL支持用户選擇目標學校和面試輪次，進行完整的模拟面試練習。

#### Scenario: 選擇學校和輪次
- **WHEN** 用户在"開始練習"页面選擇"學校-輪次模拟面試"模式
- **THEN** 係統显示學校下拉選擇器（從`school_profiles`表获取）
- **AND** 显示輪次下拉選擇器（標準選項：第一輪、第二輪、最终輪，以及自定义選項）
- **AND** 用户可以選擇學校和輪次後開始練習

#### Scenario: 基于輪次生成模拟題目
- **WHEN** 用户選擇了學校和輪次（如SPCC第一輪）
- **THEN** 係統搜索`questions`表中该學校且來源为`interview_memory`的題目
- **AND** 搜索`interview_memories`表中该學校和輪次匹配的面試回憶
- **AND** 将这些历史數據作为參考，生成或選擇類似風格的題目
- **AND** 生成的題目应覆盖该輪次常见的考查重點（基于學校特征和历史數據）

#### Scenario: 完整模拟面試流程
- **WHEN** 用户完成學校-輪次模拟面試的所有題目
- **THEN** 係統生成完整的模拟面試總結
- **AND** 總結应包含：整体表现、各專項得分、針對该學校该輪次的建議
- **AND** 与真实面試场景對比，指出需要改進的地方

#### Scenario: 題目來源信息展示
- **WHEN** 用户在模拟面試中查看題目详情
- **THEN** 係統显示題目來源信息（历史題目 vs AI生成）
- **AND** 如果是AI生成，显示參考了哪些历史題目或面試回憶
- **AND** 如果是历史題目，显示來源（面試回憶ID或題目ID）
