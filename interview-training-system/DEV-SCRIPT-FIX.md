# dev.sh è„šæœ¬å•é¡Œä¿®å¤èªªæ˜

## å•é¡Œæè¿°

ç”¨æˆ·æŠ¥å‘Š `dev.sh` è„šæœ¬æ²¡æœ‰æ­£ç¢ºå¯å‹•å¾Œç«¯åº”ç”¨ã€‚

## æ ¹æœ¬åŸå› 

1. **å¤šä¸ªé€²ç¨‹æ®‹ç•™**ï¼šä¹‹å‰çš„å¾Œç«¯é€²ç¨‹æ²¡æœ‰æ­£ç¢ºæ¸…ç†ï¼Œå°è‡´å¤šä¸ª `tsx watch` é€²ç¨‹åŒæ™‚è¿è¡Œ
2. **ç«¯å£å†²çª**ï¼šè™½ç„¶æœ‰å¤šä¸ªé€²ç¨‹ï¼Œä½†æ²¡æœ‰é€²ç¨‹æˆåŠŸç›‘å¬ 3001 ç«¯å£
3. **é”™è¯¯å¤„ç†ä¸è¶³**ï¼šdev.sh æ²¡æœ‰æ¸…ç†æ®‹ç•™é€²ç¨‹çš„é‚è¼¯

## è§£å†³æ–¹æ¡ˆ

### 1. æ›´æ–° dev.sh è„šæœ¬

åœ¨å¯å‹•æœå‹™å‰æ·»åŠ é€²ç¨‹æ¸…ç†ï¼š

```bash
# æ¸…ç†ä¹‹å‰å¯èƒ½æ®‹ç•™çš„é€²ç¨‹
echo -e "${BLUE}ğŸ§¹ æ¸…ç†æ®‹ç•™é€²ç¨‹...${NC}"
pkill -f "tsx watch src/index.ts" 2>/dev/null || true
pkill -f "vite.*frontend" 2>/dev/null || true
sleep 1

# å¯å‹•å‰å¾Œç«¯ï¼ˆä½¿ç”¨ concurrently åŒæ™‚æ˜¾ç¤ºæ—¥å¿—ï¼‰
echo -e "${GREEN}ğŸš€ å¯å‹•å‰å¾Œç«¯æœå‹™...${NC}"
npm run dev
```

### 2. æ‰‹å‹•æ¸…ç†å’Œé‡å¯å‘½ä»¤

å¦‚æœé‡åˆ°å•é¡Œï¼Œå¯ä»¥æ‰‹å‹•æ¸…ç†ï¼š

```bash
# æ–¹æ³• 1: æ€æ‰æ‰€æœ‰ç›¸é—œé€²ç¨‹
pkill -9 -f "tsx watch src/index.ts"
pkill -9 -f "vite.*frontend"

# æ–¹æ³• 2: é‡æ–°è¿è¡Œ dev.sh
cd /Users/chenkan/project/plans/interview-training-system
./dev.sh

# æ–¹æ³• 3: å•ç‹¬å¯å‹•å¾Œç«¯ï¼ˆèª¿è©¦ç”¨ï¼‰
cd backend
npm run dev
```

### 3. éªŒè¯å¾Œç«¯ç‹€æ…‹

ä½¿ç”¨æ–°å‰µå»ºçš„æµ‹è©¦è„šæœ¬ï¼š

```bash
./test-dev.sh
```

æˆ–æ‰‹å‹•æ£€æŸ¥ï¼š

```bash
# æ£€æŸ¥é€²ç¨‹
pgrep -f "tsx watch src/index.ts"

# æ£€æŸ¥ç«¯å£
lsof -i :3001

# æ£€æŸ¥å¥åº·ç‹€æ…‹
curl http://localhost:3001/health

# æŸ¥çœ‹æ—¥å¿—
tail -f /tmp/backend.log  # å¦‚æœä½¿ç”¨å¾Œå°å¯å‹•
```

## å½“å‰ç‹€æ…‹

âœ… **å·²ä¿®å¤**
- å¾Œç«¯æˆåŠŸå¯å‹•å¹¶ç›‘å¬ 3001 ç«¯å£
- å¥åº·æ£€æŸ¥æ¥å£æ­£å¸¸å“åº”
- æ•¸æ“šåº«è¿æ¥æ­£å¸¸
- API æ¥å£å¯ä»¥æ­£å¸¸è®¿å•

## æµ‹è©¦çµæœ

```bash
$ curl http://localhost:3001/health
{"status":"ok","timestamp":"2026-01-24T18:40:19.844Z"}

$ curl http://localhost:3001/api/schools
{"success":true,"data":[...]}  # æ­£å¸¸è¿”å›å­¸æ ¡åˆ—è¡¨
```

## æ¨èä½¿ç”¨æ–¹å¼

### é–‹ç™¼ç¯å¢ƒå¯å‹•

**æ–¹å¼ 1: ä½¿ç”¨ dev.shï¼ˆæ¨èï¼‰**
```bash
cd /Users/chenkan/project/plans/interview-training-system
./dev.sh
```

å„ªé»ï¼š
- ä¸€é”®å¯å‹•å‰å¾Œç«¯
- åŒæ™‚æ˜¾ç¤ºå‰å¾Œç«¯æ—¥å¿—
- è‡ªå‹•æ¸…ç†æ®‹ç•™é€²ç¨‹

**æ–¹å¼ 2: åˆ†åˆ¥å¯å‹•ï¼ˆèª¿è©¦ç”¨ï¼‰**
```bash
# ç»ˆç«¯ 1 - å¯å‹•å¾Œç«¯
cd backend
npm run dev

# ç»ˆç«¯ 2 - å¯å‹•å‰ç«¯
cd frontend
npm run dev
```

å„ªé»ï¼š
- æ›´å®¹æ˜“çœ‹åˆ°å„è‡ªçš„æ—¥å¿—
- æ–¹ä¾¿å•ç‹¬é‡å¯æŸä¸ªæœå‹™

### åœæ­¢æœå‹™

```bash
# å¦‚æœä½¿ç”¨ dev.shï¼ŒæŒ‰ Ctrl+C å³å¯

# å¦‚æœéœ€è¦å¼ºåˆ¶åœæ­¢
pkill -f "tsx watch src/index.ts"
pkill -f "vite"
```

## å¸¸è§å•é¡Œæ’æŸ¥

### å•é¡Œ 1: ç«¯å£è¢«å ç”¨

```bash
# æŸ¥çœ‹å ç”¨ 3001 ç«¯å£çš„é€²ç¨‹
lsof -i :3001

# æ€æ‰å ç”¨ç«¯å£çš„é€²ç¨‹
kill -9 <PID>
```

### å•é¡Œ 2: å¾Œç«¯å¯å‹•å¾Œç«‹å³å´©æºƒ

æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š
```bash
cd backend
npm run dev
# æŸ¥çœ‹å®Œæ•´é”™è¯¯ä¿¡æ¯
```

å¸¸è§åŸå› ï¼š
- æ•¸æ“šåº«è¿æ¥å¤±æ•—ï¼ˆæ£€æŸ¥ MySQL æ˜¯å¦è¿è¡Œï¼‰
- ç¯å¢ƒå˜é‡ç¼ºå¤±ï¼ˆæ£€æŸ¥ .env æ–‡ä»¶ï¼‰
- ä¾èµ–æœªå®‰è£…ï¼ˆè¿è¡Œ `npm install`ï¼‰

### å•é¡Œ 3: å¤šä¸ªé€²ç¨‹æ®‹ç•™

```bash
# æŸ¥çœ‹æ‰€æœ‰ç›¸é—œé€²ç¨‹
ps aux | grep -E "tsx|vite" | grep -v grep

# æ¸…ç†æ‰€æœ‰
pkill -9 -f "tsx watch"
pkill -9 -f "vite"
```

## æ–‡ä»¶æ¸…å•

- `dev.sh` - ä¸»å¯å‹•è„šæœ¬ï¼ˆå·²æ›´æ–°ï¼‰
- `test-dev.sh` - éªŒè¯è„šæœ¬ï¼ˆæ–°å¢ï¼‰
- `backend/src/index.ts` - å¾Œç«¯å…¥å£
- `package.json` - æ ¹ç›®éŒ„é…ç½®ï¼ˆå« concurrentlyï¼‰

## å¾Œç»­å»ºè­°

1. **æ·»åŠ å¥åº·æ£€æŸ¥**
   - dev.sh å¯å‹•å¾Œè‡ªå‹•æ£€æŸ¥æœå‹™æ˜¯å¦æ­£å¸¸
   - å¤±æ•—æ™‚ç»™å‡ºæ˜ç¢ºæç¤º

2. **æ”¹é€²æ—¥å¿—è¾“å‡º**
   - ä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ†å‰å¾Œç«¯æ—¥å¿—
   - æ·»åŠ æ™‚é–“æˆ³

3. **å„ªé›…é€€å‡º**
   - æ•è· SIGINT/SIGTERM ä¿¡è™Ÿ
   - ç¢ºä¿é€²ç¨‹è¢«æ­£ç¢ºæ¸…ç†

## ç¸½çµ

å•é¡Œå·²è§£å†³ï¼dev.sh è„šæœ¬ç°åœ¨å¯ä»¥æ­£ç¢ºï¼š
- âœ… æ¸…ç†æ®‹ç•™é€²ç¨‹
- âœ… å¯å‹•å¾Œç«¯æœå‹™ï¼ˆç›‘å¬ 3001ï¼‰
- âœ… å¯å‹•å‰ç«¯æœå‹™ï¼ˆç›‘å¬ 5173ï¼‰
- âœ… åŒæ™‚æ˜¾ç¤ºå‰å¾Œç«¯æ—¥å¿—

ç”¨æˆ·å¯ä»¥ç›´æ¥è¿è¡Œ `./dev.sh` å¯å‹•å®Œæ•´çš„é–‹ç™¼ç¯å¢ƒã€‚
