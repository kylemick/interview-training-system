# dev.sh è„šæœ¬é—®é¢˜ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°

ç”¨æˆ·æŠ¥å‘Š `dev.sh` è„šæœ¬æ²¡æœ‰æ­£ç¡®å¯åŠ¨åç«¯åº”ç”¨ã€‚

## æ ¹æœ¬åŸå› 

1. **å¤šä¸ªè¿›ç¨‹æ®‹ç•™**ï¼šä¹‹å‰çš„åç«¯è¿›ç¨‹æ²¡æœ‰æ­£ç¡®æ¸…ç†ï¼Œå¯¼è‡´å¤šä¸ª `tsx watch` è¿›ç¨‹åŒæ—¶è¿è¡Œ
2. **ç«¯å£å†²çª**ï¼šè™½ç„¶æœ‰å¤šä¸ªè¿›ç¨‹ï¼Œä½†æ²¡æœ‰è¿›ç¨‹æˆåŠŸç›‘å¬ 3001 ç«¯å£
3. **é”™è¯¯å¤„ç†ä¸è¶³**ï¼šdev.sh æ²¡æœ‰æ¸…ç†æ®‹ç•™è¿›ç¨‹çš„é€»è¾‘

## è§£å†³æ–¹æ¡ˆ

### 1. æ›´æ–° dev.sh è„šæœ¬

åœ¨å¯åŠ¨æœåŠ¡å‰æ·»åŠ è¿›ç¨‹æ¸…ç†ï¼š

```bash
# æ¸…ç†ä¹‹å‰å¯èƒ½æ®‹ç•™çš„è¿›ç¨‹
echo -e "${BLUE}ğŸ§¹ æ¸…ç†æ®‹ç•™è¿›ç¨‹...${NC}"
pkill -f "tsx watch src/index.ts" 2>/dev/null || true
pkill -f "vite.*frontend" 2>/dev/null || true
sleep 1

# å¯åŠ¨å‰åç«¯ï¼ˆä½¿ç”¨ concurrently åŒæ—¶æ˜¾ç¤ºæ—¥å¿—ï¼‰
echo -e "${GREEN}ğŸš€ å¯åŠ¨å‰åç«¯æœåŠ¡...${NC}"
npm run dev
```

### 2. æ‰‹åŠ¨æ¸…ç†å’Œé‡å¯å‘½ä»¤

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨æ¸…ç†ï¼š

```bash
# æ–¹æ³• 1: æ€æ‰æ‰€æœ‰ç›¸å…³è¿›ç¨‹
pkill -9 -f "tsx watch src/index.ts"
pkill -9 -f "vite.*frontend"

# æ–¹æ³• 2: é‡æ–°è¿è¡Œ dev.sh
cd /Users/chenkan/project/plans/interview-training-system
./dev.sh

# æ–¹æ³• 3: å•ç‹¬å¯åŠ¨åç«¯ï¼ˆè°ƒè¯•ç”¨ï¼‰
cd backend
npm run dev
```

### 3. éªŒè¯åç«¯çŠ¶æ€

ä½¿ç”¨æ–°åˆ›å»ºçš„æµ‹è¯•è„šæœ¬ï¼š

```bash
./test-dev.sh
```

æˆ–æ‰‹åŠ¨æ£€æŸ¥ï¼š

```bash
# æ£€æŸ¥è¿›ç¨‹
pgrep -f "tsx watch src/index.ts"

# æ£€æŸ¥ç«¯å£
lsof -i :3001

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost:3001/health

# æŸ¥çœ‹æ—¥å¿—
tail -f /tmp/backend.log  # å¦‚æœä½¿ç”¨åå°å¯åŠ¨
```

## å½“å‰çŠ¶æ€

âœ… **å·²ä¿®å¤**
- åç«¯æˆåŠŸå¯åŠ¨å¹¶ç›‘å¬ 3001 ç«¯å£
- å¥åº·æ£€æŸ¥æ¥å£æ­£å¸¸å“åº”
- æ•°æ®åº“è¿æ¥æ­£å¸¸
- API æ¥å£å¯ä»¥æ­£å¸¸è®¿é—®

## æµ‹è¯•ç»“æœ

```bash
$ curl http://localhost:3001/health
{"status":"ok","timestamp":"2026-01-24T18:40:19.844Z"}

$ curl http://localhost:3001/api/schools
{"success":true,"data":[...]}  # æ­£å¸¸è¿”å›å­¦æ ¡åˆ—è¡¨
```

## æ¨èä½¿ç”¨æ–¹å¼

### å¼€å‘ç¯å¢ƒå¯åŠ¨

**æ–¹å¼ 1: ä½¿ç”¨ dev.shï¼ˆæ¨èï¼‰**
```bash
cd /Users/chenkan/project/plans/interview-training-system
./dev.sh
```

ä¼˜ç‚¹ï¼š
- ä¸€é”®å¯åŠ¨å‰åç«¯
- åŒæ—¶æ˜¾ç¤ºå‰åç«¯æ—¥å¿—
- è‡ªåŠ¨æ¸…ç†æ®‹ç•™è¿›ç¨‹

**æ–¹å¼ 2: åˆ†åˆ«å¯åŠ¨ï¼ˆè°ƒè¯•ç”¨ï¼‰**
```bash
# ç»ˆç«¯ 1 - å¯åŠ¨åç«¯
cd backend
npm run dev

# ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯
cd frontend
npm run dev
```

ä¼˜ç‚¹ï¼š
- æ›´å®¹æ˜“çœ‹åˆ°å„è‡ªçš„æ—¥å¿—
- æ–¹ä¾¿å•ç‹¬é‡å¯æŸä¸ªæœåŠ¡

### åœæ­¢æœåŠ¡

```bash
# å¦‚æœä½¿ç”¨ dev.shï¼ŒæŒ‰ Ctrl+C å³å¯

# å¦‚æœéœ€è¦å¼ºåˆ¶åœæ­¢
pkill -f "tsx watch src/index.ts"
pkill -f "vite"
```

## å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: ç«¯å£è¢«å ç”¨

```bash
# æŸ¥çœ‹å ç”¨ 3001 ç«¯å£çš„è¿›ç¨‹
lsof -i :3001

# æ€æ‰å ç”¨ç«¯å£çš„è¿›ç¨‹
kill -9 <PID>
```

### é—®é¢˜ 2: åç«¯å¯åŠ¨åç«‹å³å´©æºƒ

æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š
```bash
cd backend
npm run dev
# æŸ¥çœ‹å®Œæ•´é”™è¯¯ä¿¡æ¯
```

å¸¸è§åŸå› ï¼š
- æ•°æ®åº“è¿æ¥å¤±è´¥ï¼ˆæ£€æŸ¥ MySQL æ˜¯å¦è¿è¡Œï¼‰
- ç¯å¢ƒå˜é‡ç¼ºå¤±ï¼ˆæ£€æŸ¥ .env æ–‡ä»¶ï¼‰
- ä¾èµ–æœªå®‰è£…ï¼ˆè¿è¡Œ `npm install`ï¼‰

### é—®é¢˜ 3: å¤šä¸ªè¿›ç¨‹æ®‹ç•™

```bash
# æŸ¥çœ‹æ‰€æœ‰ç›¸å…³è¿›ç¨‹
ps aux | grep -E "tsx|vite" | grep -v grep

# æ¸…ç†æ‰€æœ‰
pkill -9 -f "tsx watch"
pkill -9 -f "vite"
```

## æ–‡ä»¶æ¸…å•

- `dev.sh` - ä¸»å¯åŠ¨è„šæœ¬ï¼ˆå·²æ›´æ–°ï¼‰
- `test-dev.sh` - éªŒè¯è„šæœ¬ï¼ˆæ–°å¢ï¼‰
- `backend/src/index.ts` - åç«¯å…¥å£
- `package.json` - æ ¹ç›®å½•é…ç½®ï¼ˆå« concurrentlyï¼‰

## åç»­å»ºè®®

1. **æ·»åŠ å¥åº·æ£€æŸ¥**
   - dev.sh å¯åŠ¨åè‡ªåŠ¨æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸
   - å¤±è´¥æ—¶ç»™å‡ºæ˜ç¡®æç¤º

2. **æ”¹è¿›æ—¥å¿—è¾“å‡º**
   - ä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ†å‰åç«¯æ—¥å¿—
   - æ·»åŠ æ—¶é—´æˆ³

3. **ä¼˜é›…é€€å‡º**
   - æ•è· SIGINT/SIGTERM ä¿¡å·
   - ç¡®ä¿è¿›ç¨‹è¢«æ­£ç¡®æ¸…ç†

## æ€»ç»“

é—®é¢˜å·²è§£å†³ï¼dev.sh è„šæœ¬ç°åœ¨å¯ä»¥æ­£ç¡®ï¼š
- âœ… æ¸…ç†æ®‹ç•™è¿›ç¨‹
- âœ… å¯åŠ¨åç«¯æœåŠ¡ï¼ˆç›‘å¬ 3001ï¼‰
- âœ… å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆç›‘å¬ 5173ï¼‰
- âœ… åŒæ—¶æ˜¾ç¤ºå‰åç«¯æ—¥å¿—

ç”¨æˆ·å¯ä»¥ç›´æ¥è¿è¡Œ `./dev.sh` å¯åŠ¨å®Œæ•´çš„å¼€å‘ç¯å¢ƒã€‚
