# Capability: AI Thinking Display (AI思考过程展示)

## ADDED Requirements

### Requirement: 全局AI思考展示组件
系统SHALL在所有有AI调用的页面提供一个悬浮框组件，用于展示AI思考过程。

#### Scenario: 组件自动显示
- **WHEN** 用户触发任何AI调用（生成题目、生成反馈、生成计划等）
- **THEN** 系统在页面右下角自动显示AI思考展示悬浮框
- **AND** 悬浮框显示当前AI任务类型（如"正在生成题目"）
- **AND** 悬浮框显示思考步骤列表，展示AI正在进行的操作

#### Scenario: 思考步骤更新
- **WHEN** AI处理过程中
- **THEN** 系统定期更新思考步骤状态（如"分析题目要求" → "搜索相关知识点" → "生成题目内容"）
- **AND** 当前步骤高亮显示
- **AND** 已完成步骤显示为已完成状态
- **AND** 更新过程有平滑的动画效果

#### Scenario: 组件自动隐藏
- **WHEN** AI调用成功完成
- **THEN** 系统显示"完成"步骤
- **AND** 3秒后自动隐藏悬浮框
- **OR** 用户点击关闭按钮立即隐藏

#### Scenario: 错误处理展示
- **WHEN** AI调用失败
- **THEN** 系统在思考步骤中显示错误信息
- **AND** 悬浮框保持显示，让用户了解失败原因
- **AND** 用户可以手动关闭悬浮框

#### Scenario: 组件交互
- **WHEN** 用户点击悬浮框的最小化按钮
- **THEN** 悬浮框最小化为小图标
- **AND** 点击图标可以重新展开
- **WHEN** 用户点击关闭按钮
- **THEN** 悬浮框立即隐藏

### Requirement: 思考步骤内容
系统SHALL为不同类型的AI任务提供相应的思考步骤描述。

#### Scenario: 生成题目的思考步骤
- **WHEN** 用户触发生成题目功能
- **THEN** 系统显示以下思考步骤：
  - "分析题目要求（类别、难度、学校特点）"
  - "搜索相关知识点和参考题目"
  - "生成题目内容"
  - "验证题目质量和语言规范"
  - "完成"
- **AND** 每个步骤根据实际处理进度更新状态

#### Scenario: 生成反馈的思考步骤
- **WHEN** 用户提交答案后触发生成反馈
- **THEN** 系统显示以下思考步骤：
  - "分析学生回答内容"
  - "评估语言表达质量"
  - "评估内容深度和相关性"
  - "识别弱点和改进点"
  - "生成针对性建议"
  - "完成"
- **AND** 每个步骤根据实际处理进度更新状态

#### Scenario: 生成训练计划的思考步骤
- **WHEN** 用户触发生成训练计划功能
- **THEN** 系统显示以下思考步骤：
  - "分析学生信息和目标学校"
  - "制定训练策略和时间分配"
  - "生成每日任务安排"
  - "优化时间分配和专项比例"
  - "完成"
- **AND** 每个步骤根据实际处理进度更新状态

#### Scenario: 其他AI任务的思考步骤
- **WHEN** 用户触发其他AI功能（生成学校档案、提取面试回忆、生成学习素材等）
- **THEN** 系统显示相应的思考步骤
- **AND** 步骤描述清晰易懂，符合任务特点

### Requirement: 多并发调用处理
系统SHALL正确处理多个AI调用同时进行的情况。

#### Scenario: 单个AI调用
- **WHEN** 只有一个AI调用正在进行
- **THEN** 系统正常显示该调用的思考过程
- **AND** 悬浮框显示该调用的任务类型和步骤

#### Scenario: 多个AI调用
- **WHEN** 有多个AI调用同时进行
- **THEN** 系统优先显示用户主动触发的调用（如点击按钮触发的）
- **OR** 系统显示所有调用的合并状态（如"正在处理2个任务"）
- **AND** 每个调用完成后，切换到下一个调用
- **AND** 所有调用完成后，悬浮框自动隐藏

### Requirement: 页面集成
系统SHALL在所有有AI调用的页面集成思考展示功能。

#### Scenario: 题库管理页面
- **WHEN** 用户在题库管理页面点击"AI生成题目"
- **THEN** 系统显示思考展示悬浮框
- **AND** 展示生成题目的思考步骤

#### Scenario: 练习页面
- **WHEN** 用户在练习页面提交答案后触发生成反馈
- **THEN** 系统显示思考展示悬浮框
- **AND** 展示生成反馈的思考步骤

#### Scenario: 训练计划页面
- **WHEN** 用户在训练计划页面点击"生成计划"
- **THEN** 系统显示思考展示悬浮框
- **AND** 展示生成计划的思考步骤

#### Scenario: 其他AI调用页面
- **WHEN** 用户在任何页面触发AI调用
- **THEN** 系统自动显示思考展示悬浮框
- **AND** 展示相应任务的思考步骤
- **AND** 包括但不限于：学校档案页面、面试回忆页面、弱点分析页面、Dashboard页面

### Requirement: 性能要求
系统SHALL确保思考展示功能不影响页面性能和用户体验。

#### Scenario: 组件渲染性能
- **WHEN** 思考展示组件显示和更新
- **THEN** 组件渲染不影响页面其他操作的响应速度
- **AND** 使用React.memo等优化手段避免不必要的重渲染
- **AND** 动画效果流畅，不卡顿

#### Scenario: 网络请求优化
- **WHEN** 使用轮询方式获取思考步骤更新
- **THEN** 轮询频率合理（建议2-3秒一次）
- **AND** 不影响其他API请求的性能
- **AND** AI调用完成后立即停止轮询
