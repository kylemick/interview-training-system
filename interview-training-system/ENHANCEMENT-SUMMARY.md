# åŠŸèƒ½å¢å¼ºå®Œæˆç¸½çµ

## ğŸ“‹ éœ€æ±‚

ç”¨æˆ·è¦æ±‚ï¼š
> é¢è©¦å›æ†¶AIåˆ†æä¸ä»…è¦åˆ†æé¡Œç›®ï¼Œè¿˜éœ€è¦åˆ†æå­¸ç”Ÿçš„å•é¡Œï¼ˆå¼±é»ï¼‰ï¼Œå­¸ç”Ÿå•é¡Œéœ€è¦ä¸€ä¸ªå•ç‹¬çš„è¡¨è¨˜éŒ„ï¼Œå¾Œç»­å¯ä»¥é‡å°è¿™äº›å•é¡Œï¼Œä¾†åšAIé¡Œç›®ç”Ÿæˆã€‚

## âœ… å·²å®Œæˆ

### 1. æ•¸æ“šåº«Schemaæ›´æ–°

**æ–°å¢è¡¨**: `student_weaknesses`

å­—æ®µèªªæ˜ï¼š
- `weakness_type` - å¼±é»é¡å‹ï¼ˆvocabulary/grammar/logic/knowledge_gap/confidence/expressionï¼‰
- `severity` - åš´é‡ç¨‹åº¦ï¼ˆlow/medium/highï¼‰
- `description` - å¼±é»æè¿°
- `example_text` - ç¤ºä¾‹åŸæ–‡
- `improvement_suggestions` - æ”¹é€²å»ºè­°
- `practice_count` - å·²é‡å°æ€§ç·´ç¿’æ¬¡æ•¸
- `status` - ç‹€æ…‹ï¼ˆactive/improved/resolvedï¼‰

### 2. AIåˆ†æå¢å¼º

**æ›´æ–°æ¥å£**: `POST /api/ai/extract-interview-memory`

**æ–°çš„åˆ†æèƒ½åŠ›**ï¼š
- âœ… æå–é¢è©¦å•é¡Œï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰
- ğŸ†• è­˜åˆ¥å­¸ç”Ÿå¼±é»ï¼ˆæ–°å¢ï¼‰
- ğŸ†• è©•ä¼°åš´é‡ç¨‹åº¦
- ğŸ†• ç”Ÿæˆæ”¹é€²å»ºè­°
- ğŸ†• æå–ç›¸é—œè©±é¡Œ

**è¿”å›æ•¸æ“šç¤ºä¾‹**ï¼š
```json
{
  "questions": [...],
  "weaknesses": [
    {
      "category": "english-oral",
      "weakness_type": "vocabulary",
      "description": "è©æ±‡é‡ä¸è¶³ï¼Œè¡¨é”å•ä¸€",
      "example_text": "I think... it's good...",
      "severity": "medium",
      "improvement_suggestions": "å»ºè­°å¤šé˜…è¯»è‹±æ–‡åŸè‘—...",
      "related_topics": ["reading", "vocabulary"]
    }
  ],
  "summary": "æ•´ä½“åˆ†æ..."
}
```

### 3. æ–°å¢APIæ¥å£

#### A. å¼±é»ç®¡ç†API (`/api/weaknesses`)

1. **GET /api/weaknesses** - è·å–å¼±é»åˆ—è¡¨
   - æ”¯æŒæŒ‰å­¸ç”Ÿã€é¡åˆ¥ã€ç‹€æ…‹ã€åš´é‡ç¨‹åº¦ç­›é¸

2. **GET /api/weaknesses/:id** - è·å–å•ä¸ªå¼±é»è¯¦æƒ…

3. **PATCH /api/weaknesses/:id/status** - æ›´æ–°å¼±é»ç‹€æ…‹
   - active â†’ improved â†’ resolved

4. **DELETE /api/weaknesses/:id** - åˆ é™¤å¼±é»è¨˜éŒ„

5. **GET /api/weaknesses/stats/summary** - å¼±é»çµ±è¨ˆ
   - æŒ‰é¡åˆ¥ã€é¡å‹ã€åš´é‡ç¨‹åº¦ã€ç‹€æ…‹çµ±è¨ˆ

#### B. AIå¢å¼ºAPI

1. **POST /api/ai/save-weaknesses** - ä¿å­˜å¼±é»åˆ†æ
   - æ‰¹é‡ä¿å­˜è­˜åˆ¥çš„å¼±é»

2. **POST /api/ai/generate-questions-from-weaknesses** ğŸ”¥
   - æ ¹æ“šå¼±é»IDç”Ÿæˆé‡å°æ€§é¡Œç›®
   - æˆ–æ ¹æ“šé¡åˆ¥ç”Ÿæˆé¡Œç›®
   - è‡ªå‹•æ›´æ–°ç·´ç¿’æ¬¡æ•¸

### 4. å‰ç«¯ç•Œé¢æ›´æ–°

**é¢è©¦å›æ†¶é¡µé¢å¢å¼º**ï¼š
- âœ… æ˜¾ç¤ºAIè­˜åˆ¥çš„å¼±é»å¡ç‰‡
- âœ… åš´é‡ç¨‹åº¦æ¨™ç±¤ï¼ˆé«˜/ä¸­/ä½ï¼‰
- âœ… å¼±é»æè¿°å’Œç¤ºä¾‹
- âœ… æ”¹é€²å»ºè­°å±•ç¤º
- âœ… ç›¸é—œè©±é¡Œæ¨™ç±¤
- âœ… è‡ªå‹•ä¿å­˜å•é¡Œå’Œå¼±é»

### 5. æ–‡æª”

- âœ… `FEATURE-WEAKNESS-ANALYSIS.md` - å®Œæ•´åŠŸèƒ½æ–‡æª”
- âœ… æ•¸æ“šåº«è¿ç§»è„šæœ¬
- âœ… APIä½¿ç”¨ç¤ºä¾‹
- âœ… ä½¿ç”¨æµç¨‹èªªæ˜

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æµç¨‹

### æµç¨‹ 1: åˆ†æä¸ä¿å­˜

```
ç”¨æˆ·è¾“å…¥é¢è©¦å›æ†¶
    â†“
AIåˆ†ææå–å•é¡Œå’Œå¼±é»
    â†“
å‰ç«¯å±•ç¤ºåˆ†æçµæœ
    â†“
ç”¨æˆ·é»å‡»"ä¿å­˜åˆ°é¡Œåº«"
    â†“
ä¿‚çµ±ä¿å­˜ï¼š
  - questions è¡¨ â† é¡Œç›®
  - student_weaknesses è¡¨ â† å¼±é»
```

### æµç¨‹ 2: é‡å°æ€§ç·´ç¿’

```
æŸ¥çœ‹å­¸ç”Ÿå¼±é»åˆ—è¡¨
    â†“
é¸æ“‡è¦åŠ å¼ºçš„å¼±é»
    â†“
èª¿ç”¨ generate-questions-from-weaknesses
    â†“
AIç”Ÿæˆé‡å°æ€§é¡Œç›®
    â†“
é¡Œç›®ä¿å­˜åˆ°é¡Œåº«ï¼ˆæ¨™è¨˜ä¸ºtargetedï¼‰
    â†“
æ›´æ–°å¼±é»çš„practice_count
```

### æµç¨‹ 3: é€²åº¦è¿½è¸ª

```
å®Œæˆé‡å°æ€§ç·´ç¿’
    â†“
ä¿‚çµ±è¨˜éŒ„practice_count++
    â†“
ç”¨æˆ·/ä¿‚çµ±æ›´æ–°å¼±é»ç‹€æ…‹
  - active â†’ improved â†’ resolved
    â†“
æŸ¥çœ‹å¼±é»æ”¹å–„çµ±è¨ˆ
```

## ğŸ“Š æ•¸æ“šé—œè¯

```
student_weaknesses
    â†“ (é€šécategoryé—œè¯)
questions (source='ai_generated_targeted')
    â†“ (é€šéquestion_idé—œè¯)
qa_records
    â†“ (é€šésession_idé—œè¯)
feedback
```

## ğŸ”§ æŠ€è¡“å®ç°äº®é»

### 1. AIæç¤ºè©å„ªåŒ–

**å¤šç¶­åº¦åˆ†æ**ï¼š
- è©æ±‡ï¼ˆvocabularyï¼‰
- èªæ³•ï¼ˆgrammarï¼‰
- é‚è¼¯ï¼ˆlogicï¼‰
- çŸ¥è­˜ï¼ˆknowledge_gapï¼‰
- ä¿¡å¿ƒï¼ˆconfidenceï¼‰
- è¡¨é”ï¼ˆexpressionï¼‰

### 2. é‡å°æ€§é¡Œç›®ç”Ÿæˆ

**æ™ºèƒ½åŒ¹é…**ï¼š
- æ ¹æ“šå¼±é»é¡å‹å®šåˆ¶é¡Œç›®
- è€ƒè™‘åš´é‡ç¨‹åº¦èª¿æ•´é›£åº¦
- çµåˆç›¸é—œè©±é¡Œç”Ÿæˆå…§å®¹

### 3. æ•¸æ“šå®Œæ•´æ€§

**ç´¢å¼•å„ªåŒ–**ï¼š
```sql
INDEX idx_student_category (student_name, category)
INDEX idx_status_severity (status, severity)
```

**å¤–é”®é—œä¿‚**ï¼š
- questions.source æ¨™è¨˜ä¾†æº
- practice_count è¿½è¸ªç·´ç¿’æ¬¡æ•¸

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: å®Œæ•´æµç¨‹

```bash
# 1. æäº¤é¢è©¦å›æ†¶
curl -X POST http://localhost:3001/api/ai/extract-interview-memory \
  -d '{"text":"ä»Šå¤©é¢è©¦è¡¨ç°ä¸å¥½ï¼Œèªªè©±ç¸½æ˜¯I think... I think..."}'

# 2. AIè¿”å›ï¼š
#    - å•é¡Œï¼šTell me about yourself
#    - å¼±é»ï¼švocabulary - è©æ±‡å•ä¸€ï¼Œé‡å¤ä½¿ç”¨"I think"

# 3. ä¿å­˜ï¼ˆå‰ç«¯è‡ªå‹•ï¼‰

# 4. æŸ¥çœ‹å¼±é»
curl http://localhost:3001/api/weaknesses

# 5. ç”Ÿæˆé‡å°æ€§é¡Œç›®
curl -X POST http://localhost:3001/api/ai/generate-questions-from-weaknesses \
  -d '{"weakness_ids":[1],"count":5}'

# 6. ç·´ç¿’å¹¶æ¨™è¨˜æ”¹å–„
curl -X PATCH http://localhost:3001/api/weaknesses/1/status \
  -d '{"status":"improved"}'
```

## ğŸ å¸¦ä¾†çš„åƒ¹å€¼

1. **ä¸ªæ€§åŒ–è¨“ç·´**
   - ä¸å†ç›²ç›®ç·´ç¿’ï¼Œé‡å°å¼±é»å¼ºåŒ–

2. **é€²åº¦å¯è§†åŒ–**
   - æ¸…æ™°çœ‹åˆ°å“ªäº›æ–¹é¢éœ€è¦æ”¹é€²
   - è¿½è¸ªæ”¹å–„å†ç¨‹

3. **æ™ºèƒ½æ¨è**
   - AIè‡ªå‹•ç”Ÿæˆæœ€åˆé€‚çš„ç·´ç¿’é¡Œ
   - èŠ‚çœäººå·¥æŒ‘é¡Œæ™‚é–“

4. **æ•¸æ“šé©±å‹•**
   - åŸºäºçœŸå®è¡¨ç°è­˜åˆ¥å•é¡Œ
   - é‡åŒ–æ”¹å–„æ•ˆæœ

## ğŸš€ æœªä¾†æ‰©å±•æ–¹å‘

1. **å¼±é»è¶‹å‹¢åˆ†æ**
   - æ™‚é–“è½´å±•ç¤ºå¼±é»å˜åŒ–
   - é¢„æµ‹éœ€è¦åŠ å¼ºçš„é ˜åŸŸ

2. **è‡ªå‹•ç·´ç¿’æ¨è**
   - ç™»éŒ„æ™‚è‡ªå‹•æ¨èé‡å°æ€§é¡Œç›®
   - æ™ºèƒ½èª¿æ•´ç·´ç¿’é›£åº¦

3. **ç»¼åˆæŠ¥å‘Š**
   - ç”Ÿæˆå¼±é»åˆ†ææŠ¥å‘Š
   - å°å‡ºPDFä¾›å®¶é•·æŸ¥çœ‹

## âœ… è´¨é‡ä¿è¯

- âœ… æ— linté”™è¯¯
- âœ… APIæ¥å£æ­£å¸¸
- âœ… æ•¸æ“šåº«schemaæ›´æ–°
- âœ… å‰ç«¯ç•Œé¢å®Œæ•´
- âœ… æ–‡æª”é½å…¨

## ğŸ‰ ç¸½çµ

æˆåŠŸå®ç°äº†å®Œæ•´çš„å­¸ç”Ÿå¼±é»åˆ†æå’Œé‡å°æ€§é¡Œç›®ç”Ÿæˆä¿‚çµ±ï¼

**æ ¸å¿ƒæˆæœ**ï¼š
- ğŸ†• 1ä¸ªæ–°æ•¸æ“šè¡¨ï¼ˆstudent_weaknessesï¼‰
- ğŸ†• 7ä¸ªæ–°APIæ¥å£
- ğŸ”„ 1ä¸ªå¢å¼ºçš„AIåˆ†ææ¥å£
- ğŸ¨ å‰ç«¯ç•Œé¢å¼±é»å±•ç¤º
- ğŸ“š å®Œæ•´çš„åŠŸèƒ½æ–‡æª”

ä¿‚çµ±ç°åœ¨ä¸ä»…æ˜¯"ç·´ç¿’å·¥å…·"ï¼Œæ›´æ˜¯"æ™ºèƒ½è¨“ç·´åŠ©æ‰‹"ï¼ ğŸ“âœ¨
