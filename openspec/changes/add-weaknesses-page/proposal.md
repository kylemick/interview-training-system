# Change: 創建弱點管理页面

## Why

当前係統中，弱點分析功能的後端API已完整实现，弱點數據在Dashboard、Progress、Settings等页面有部分展示，但缺少一个專门的弱點管理页面。这導致：

1. 用户无法集中查看和管理所有弱點記錄
2. 弱點详情查看、狀態更新、删除等操作分散在不同页面，操作不便
3. 无法對弱點進行批量操作和高级筛選
4. 弱點統計和可视化功能不完整，用户難以全面了解弱點改善情况
5. 缺少弱點详情页面，无法查看弱點的完整信息（改進建議、相關話題、練習历史等）

## What Changes

### 核心功能
- 創建独立的弱點管理页面 (`/weaknesses`)，提供完整的弱點CRUD操作
- 弱點列表页面：支持多維度筛選（類別、狀態、嚴重程度、弱點類型）、排序、分页
- 弱點详情页面：展示完整信息（描述、示例、改進建議、相關話題、練習历史、狀態变更記錄）
- 弱點狀態管理：支持更新狀態（active/improved/resolved）、删除弱點
- 批量操作：支持批量更新狀態、批量删除、批量生成針對性題目
- 弱點統計卡片：總弱點數、按狀態分布、按嚴重程度分布、按類別分布
- 弱點可视化：趋勢图表、類型分布图、改善率分析
- 快速操作：一键生成針對性題目、查看相關練習記錄
- **基于弱點創建訓練計劃**：根據单个弱點的類別、類型和嚴重程度，使用AI生成針對性的訓練計劃，重點加强相關專項類別，并自動生成提升相關的題目

### 用户体验增强
- 在導航菜单中添加"弱點管理"入口（使用WarningOutlined图標）
- 弱點列表支持表格和卡片两種视图模式
- 提供筛選预设（如"高嚴重度活跃弱點"、"已改善弱點"等）
- 详情页面支持编輯弱點的描述和改進建議
- 狀態变更時显示確认對話框，避免误操作

### 技術实现
- 前端新增页面：`frontend/src/pages/Weaknesses/index.tsx`
- 前端新增路由：`/weaknesses` 和 `/weaknesses/:id`
- 复用现有API：`/api/weaknesses` 係列接口（无需新增後端接口）
- 導航菜单更新：在Layout組件中添加弱點管理菜单項
- 後端新增API：`POST /api/plans/from-weakness` - 基于弱點創建訓練計劃
- AI服務增强：扩展訓練計劃生成函數，支持基于弱點的針對性計劃生成

**非BREAKING**：这是新增功能，不影响现有功能。现有页面的弱點展示功能保持不变。

## Impact

### 影响規范
- **weakness-management** (新增): 定义弱點管理页面的功能和交互規范

### 影响代碼
- **前端**:
  - `App.tsx`: 添加 `/weaknesses` 和 `/weaknesses/:id` 路由
  - `components/Layout.tsx`: 添加弱點管理菜单項
  - `pages/Weaknesses/index.tsx`: 新建弱點管理页面（列表+详情）
  - `utils/api.ts`: 添加 `plans.createFromWeakness()` API方法
- **後端**:
  - `routes/plans.ts`: 新增 `POST /api/plans/from-weakness` 路由
  - `ai/trainingPlanner.ts`: 新增 `generateTrainingPlanFromWeakness()` 函數
  - 复用现有 `/api/weaknesses` 接口

### 实现狀態
- 📋 **待实现**: 所有功能待開發

## Benefits

1. **集中管理**: 用户可以在一个页面查看和管理所有弱點，提高操作效率
2. **完整信息**: 详情页面展示弱點的完整信息，帮助用户更好地理解問題和改進方向
3. **數據驱動**: 統計和可视化帮助用户了解弱點改善趋勢，制定針對性訓練計劃
4. **操作便捷**: 批量操作和快速筛選提高管理效率
5. **用户体验**: 統一的界面设計，与係統其他页面保持一致
6. **針對性訓練**: 基于弱點自動生成訓練計劃，帮助用户係統化地改善具体問題
